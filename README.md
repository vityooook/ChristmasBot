# üéÑ Christmas Gift Bot

Telegram-–±–æ—Ç –¥–ª—è –Ω–æ–≤–æ–≥–æ–¥–Ω–µ–≥–æ —Ä–æ–∑—ã–≥—Ä—ã—à–∞ –ø–æ–¥–∞—Ä–∫–æ–≤.

## –£—Å–ª–æ–≤–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥–∞—Ä–∫–∞

1. –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∫–∞–Ω–∞–ª
2. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ VPN —á–µ—Ä–µ–∑ –±–æ—Ç–∞

## –ó–∞–ø—É—Å–∫

```bash
# –°–æ–∑–¥–∞—Ç—å venv
python -m venv venv
source venv/bin/activate

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt

# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å .env (—Å–º. .env.example)

# –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã –ë–î
python -c "
import asyncio
from app.database.engine import engine, Base
from app.database.models.user import User
async def create():
    async with engine.begin() as conn:
        await conn.run_sync(Base.metadata.create_all)
asyncio.run(create())
"

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
python app/__main__.py
```

## Docker

```bash
docker-compose up -d
```

---

## üîß –ê–¥–º–∏–Ω-–∫–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `/admin` | –°–ø—Ä–∞–≤–∫–∞ –ø–æ –≤—Å–µ–º –∫–æ–º–∞–Ω–¥–∞–º |
| `/stats` | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: —É—á–∞—Å—Ç–Ω–∏–∫–∏, –ø–æ–¥–∞—Ä–∫–∏, –±–∞–ª–∞–Ω—Å |
| `/balance` | –ë–∞–ª–∞–Ω—Å –∑–≤—ë–∑–¥ –±–æ—Ç–∞ |
| `/export` | –°–∫–∞—á–∞—Ç—å CSV —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ |
| `/pause` | –ü–æ—Å—Ç–∞–≤–∏—Ç—å –±–æ—Ç–∞ –Ω–∞ –ø–∞—É–∑—É |
| `/resume` | –°–Ω—è—Ç—å –±–æ—Ç–∞ —Å –ø–∞—É–∑—ã |
| `/donate [–∫–æ–ª-–≤–æ]` | –ü–æ–ø–æ–ª–Ω–∏—Ç—å –∑–≤—ë–∑–¥—ã –±–æ—Ç–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 100) |
| `/send_pending` | –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ–¥–∞—Ä–∫–∏ –æ–∂–∏–¥–∞—é—â–∏–º |

### –ü–æ–¥—Ä–æ–±–Ω–µ–µ

#### `/stats`
–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- –°—Ç–∞—Ç—É—Å –±–æ—Ç–∞ (—Ä–∞–±–æ—Ç–∞–µ—Ç/–Ω–∞ –ø–∞—É–∑–µ)
- –í—Å–µ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- –ü–æ–¥–∞—Ä–∫–æ–≤ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ
- –û–∂–∏–¥–∞—é—Ç –ø–æ–¥–∞—Ä–æ–∫
- –ë–∞–ª–∞–Ω—Å –∑–≤—ë–∑–¥

#### `/balance`
–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –±–∞–ª–∞–Ω—Å –∏ —Å–∫–æ–ª—å–∫–æ –ø–æ–¥–∞—Ä–∫–æ–≤ –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å.

#### `/export`
–í—ã–≥—Ä—É–∂–∞–µ—Ç CSV-—Ñ–∞–π–ª —Å–æ –≤—Å–µ–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏:
- user_id
- username
- gift_received (–¥–∞/–Ω–µ—Ç)
- pending_gift (–¥–∞/–Ω–µ—Ç)
- created_at

#### `/pause` / `/resume`
–°—Ç–∞–≤–∏—Ç –±–æ—Ç–∞ –Ω–∞ –ø–∞—É–∑—É. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ "–†–æ–∑—ã–≥—Ä—ã—à –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω".

#### `/donate [–∫–æ–ª-–≤–æ]`
–°–æ–∑–¥–∞—ë—Ç –∏–Ω–≤–æ–π—Å –¥–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞ –∑–≤—ë–∑–¥.
```
/donate      ‚Üí 100 –∑–≤—ë–∑–¥
/donate 500  ‚Üí 500 –∑–≤—ë–∑–¥
```

#### `/send_pending`
–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–¥–∞—Ä–∫–∏ –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –≤ –æ—á–µ—Ä–µ–¥–∏ (—É –∫–æ–≥–æ –Ω–µ —Ö–≤–∞—Ç–∏–ª–æ –∑–≤—ë–∑–¥).

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ `.env`

```env
# –ë–æ—Ç
BOT_TOKEN=123456:ABC...
BOT_USERNAME=MyBot

# –ö–∞–Ω–∞–ª –¥–ª—è –ø–æ–¥–ø–∏—Å–∫–∏ (–±–µ–∑ @)
REQUIRED_CHANNEL=MyChannel

# VPN –±–æ—Ç
VPN_BOT_USERNAME=MyVPNBot

# –ü–æ–¥–∞—Ä–æ–∫
GIFT_ID=abc123
GIFT_STAR_COST=15
MIN_STAR_BALANCE=100

# –ê–¥–º–∏–Ω—ã (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)
ADMIN_IDS=123456789,987654321

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/christmas_bot

# Remnawave API
REMNAWAVE_API_URL=https://your-remnawave.com
REMNAWAVE_API_KEY=your-api-key

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
LOG_LEVEL=INFO
```

---

## –ü–æ–ª—É—á–∏—Ç—å GIFT_ID

```bash
python app/scripts/list_gifts.py
```

–í—ã–≤–µ–¥–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–æ–¥–∞—Ä–∫–æ–≤ —Å –∏—Ö ID.

